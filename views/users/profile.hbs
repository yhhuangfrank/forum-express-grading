<div class="card card-body p-0">
  <div class="row">
    <section class="img-container col-md-3">
      {{#if user.image}}
        <img
          src="{{user.image}}"
          alt="profile-img"
          style="width: 100%; height:100%; transition: opacity 0.5s; opacity:0;"
          onload="this.style.opacity=1;"
        />
      {{else}}
        <img 
          src="https://fakeimg.pl/100" 
          style="width: 100%; height:100%; transition: opacity 0.5s; opacity:0;"
          onload="this.style.opacity=1;" 
        />
      {{/if}}
    </section>
    <section class="col-md-6 m-2">
      <h5>{{user.name}}</h5>
      <p>{{user.email}}</p>
      <p class="mb-0">{{userComments.length}} 已評論餐廳</p>
      <p class="mb-0">{{user.FavoritedRestaurants.length}} 收藏的餐廳</p>
      <p class="mb-0">{{user.Followings.length}} followings (追蹤者)</p>
      <p>{{user.Followers.length}} followers (追隨者)</p>
      {{#isSame loginUser.id user.id}}
      <a class="btn btn-primary" href="/users/{{user.id}}/edit">Edit</a>
      {{/isSame}}
    </section>
  </div>
</div>

<div class="d-flex flex-wrap">
  {{!-- Followings --}}
  <div class="card mt-4 mx-auto">
    <div class="card-header fw-bold">
      {{user.Followings.length}} Followings (追蹤者)
    </div>
    <div class="card-body d-flex justify-content-center align-items-center flex-wrap">
      {{#if user.Followings.length}}
        {{#each user.Followings}}
          <a href="/users/{{this.id}}" class="m-2">
          {{#if this.image}}
            <img
              src="{{this.image}}"
              alt="user-image"
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;"
            />
          {{else}}
            <img 
              src="https://fakeimg.pl/100" 
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;" 
            />
          {{/if}}
          </a>
        {{/each}}
      {{/if}}
    </div>
  </div>
  {{!-- Comments --}}
  <div class="card mt-4 mx-auto">
    <div class="card-header fw-bold">
      {{userComments.length}} 已評論餐廳
    </div>
    <div class="card-body d-flex justify-content-center align-items-center flex-wrap">
      {{#if userComments.length}}
        {{#each userComments}}
          <a href="/restaurants/{{this.Restaurant.id}}" class="m-2">
          {{#if this.Restaurant.image}}
            <img
              src="{{this.Restaurant.image}}"
              alt="user-image"
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;"
            />
          {{else}}
            <img 
              src="https://fakeimg.pl/100" 
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;" 
            />
          {{/if}}
          </a>
        {{/each}}
      {{/if}}
    </div>
  </div>
    {{!-- Followers --}}
  <div class="card mt-4 mx-auto">
    <div class="card-header fw-bold">
      {{user.Followers.length}} Followers (追隨者)
    </div>
    <div class="card-body d-flex justify-content-center align-items-center flex-wrap">
      {{#if user.Followers.length}}
        {{#each user.Followers}}
          <a href="/users/{{this.id}}" class="m-2">
          {{#if this.image}}
            <img
              src="{{this.image}}"
              alt="user-image"
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;"
            />
          {{else}}
            <img 
              src="https://fakeimg.pl/100" 
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;" 
            />
          {{/if}}
          </a>
        {{/each}}
      {{/if}}
    </div>
  </div>
    {{!-- FavoritedRestaurants --}}
  <div class="card mt-4 mx-auto">
    <div class="card-header fw-bold">
      {{user.FavoritedRestaurants.length}} 收藏的餐廳
    </div>
    <div class="card-body d-flex justify-content-center align-items-center flex-wrap">
      {{#if user.FavoritedRestaurants.length}}
        {{#each user.FavoritedRestaurants}}
          <a href="/restaurants/{{this.id}}" class="m-2">
          {{#if this.image}}
            <img
              src="{{this.image}}"
              alt="restaurant-image"
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;"
            />
          {{else}}
            <img 
              src="https://fakeimg.pl/100" 
              style="width: 100px; transition: opacity 0.5s; opacity:0;"
              onload="this.style.opacity=1;" 
            />
          {{/if}}
          </a>
        {{/each}}
      {{/if}}
    </div>
  </div>
</div>